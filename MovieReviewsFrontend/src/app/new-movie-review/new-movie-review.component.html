<form>
  <div class="row searchRow">
      <div class="col-sm-9">
        <input #movieName type="text" class="form-control" style="border-radius: 2px; font-size: 20px; text-align: center;" placeholder="Search for a new movie to review"/>
      </div>
      <div class="col-sm-3">
        <button class="btn btn-success btn-block btnScale"  style="border-radius: 2px; font-size: 20px;" (click)="findMovieStart(movieName.value)">Find Movie</button>
      </div>
  </div> 
</form>

<br>


<div *ngIf="searchBool && validMovie" class="movieOutput" (click)="movieSelected(filmTitle.innerHTML, filmID.innerHTML)">
  <div class="row">
    <div class="col-md-4"><img class="img-responsive moviePoster" [src]=[film.Poster]/></div>
    <!-- <h6 style="display: none;" #posterSpan>{{film.Poster}}</h6> -->
    <div class="col-md-8 movieInfoBox">
      <h2 #filmTitle>{{film.Title+" ("+film.Year+")"}}</h2>
      <h5 class="grayText">{{"Director: "+film.Director}}</h5>
      <h5 class="grayText">{{"Rated: "+film.Rated}}</h5>
      <hr/>
      <p>{{film.Plot}}</p>
      <br/>
      <br/>
      <h6 class="grayText actors">{{"Actors: "+film.Actors}}</h6>
      <h6 style="display: none;" #filmID>{{film.imdbID}}</h6>
    </div>
  </div>
</div>

<hr>

<!-- Reviewed Movies -->
<h2 class="text-center">Already Reviewed Movies</h2>
<!-- <button (click)="showReviewedMovies()">Show Movies With Reviews</button> -->
<div *ngIf="filmReviewBool" style="max-width: 800px; margin: 0 auto;"> 
  <!-- <ul> -->
    <div class="row">
        <div style="padding: 25px;" class="revMovList col-sm-4" (click)="movieSelected('TEST', testVal.innerHTML)" *ngFor="let rev of filmReviewsAll">
          <img width="100%" [src]=[rev.imageUrl]/><span style="display: none;" #testVal>{{rev.imdbId}}</span>
        </div>
    </div>
    
  <!-- </ul> -->

  
  </div>
<!-- End Reviewed Movies -->





<!-- Sample Comment Display -->

<!-- <button (click)="callCustomAPI('')">Show Comments</button>
<h3 *ngIf="filmReviewBool">
  <ul>
    <li style="cursor: pointer;" #testVal (click)="movieSelected('TEST', testVal.innerHTML)" *ngFor="let rev of filmReviews">{{rev.reviewComment}}</li>
  </ul>
</h3> -->

<!-- End Sample Comment Display -->





<!-- Popup stuff -->

<div id="darkBackground" *ngIf="popupShow" (click)="closePopup()"></div>
<div id="popup" *ngIf="popupShow">
  <h1 id="closePopupX" (click)="closePopup()">X</h1>
  <h3 class="text-center sayingAbout">{{film.Title}}'s comments</h3>
  <div id="prevComments">
    <!-- <ul>
      <li *ngFor="let rev of filmReviews">"{{rev.reviewComment}} Star rating: {{rev.starRating}}"</li>
    </ul> -->
    <app-review-comment-line *ngFor="let rev of filmReviews" [review]="rev"></app-review-comment-line>
  </div>
  <hr>
  <div class="row reviewRow" *ngIf="loggedIn">
    <div class="col-md-7">
      <input #newReviewText type="text" class="form-control" placeholder="Write Review.."/>
    </div> 
    <div class="col-md-3">
      <div style="margin-top: 4px; width: 150px; margin: 0 auto;">
          <span class="fa fa-star {{starCount >= 1 ? 'checked' : ''}}" (click)="starCheck(1)"></span>
          <span class="fa fa-star {{starCount >= 2 ? 'checked' : ''}}" (click)="starCheck(2)"></span>
          <span class="fa fa-star {{starCount >= 3 ? 'checked' : ''}}" (click)="starCheck(3)"></span>
          <span class="fa fa-star {{starCount >= 4 ? 'checked' : ''}}" (click)="starCheck(4)"></span>
          <span class="fa fa-star {{starCount >= 5 ? 'checked' : ''}}" (click)="starCheck(5)"></span>    
      </div>
      </div>
    <div class="col-md-2">
        <h6 style="display: none;" #posterSpan>{{film.Poster}}</h6> <!-- Sample -->
      <button class="submitReviewBtn btn btn-block" (click)="submitReview(newReviewText.value, posterSpan.innerHTML)">Submit</button>  
    </div>
  </div>
  <div class="text-center" *ngIf="!loggedIn">
    <button style="width: 300px; margin-bottom: 15px;" class="btn btn-success" [routerLink]="['/login']">Please login to review</button>
  </div>
        
</div>
